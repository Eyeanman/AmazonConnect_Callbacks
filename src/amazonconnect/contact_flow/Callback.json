{"modules":[{"id":"937383ce-a1d5-4c12-8d80-6f3fa11fb5cb","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"309bf485-b735-4901-8716-6024b065912c"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":193,"y":20}}},{"id":"309bf485-b735-4901-8716-6024b065912c","type":"SetVoice","branches":[{"condition":"Success","transition":"81041d5c-ae32-4d67-a3b4-aa086717b032"}],"parameters":[{"name":"GlobalVoice","value":"Amy"},{"name":"GlobalEngine","value":"Neural"},{"name":"SpeakingStyle","value":"Conversational"}],"metadata":{"position":{"x":430.0078125,"y":24.015628814697266},"overrideConsoleVoice":true,"defaultVoice":"Standard"}},{"id":"81041d5c-ae32-4d67-a3b4-aa086717b032","type":"PlayPrompt","branches":[{"condition":"Success","transition":"7b1ddec8-f0ad-478f-a0fe-559f747ed3d2"},{"condition":"Error","transition":"7b1ddec8-f0ad-478f-a0fe-559f747ed3d2"}],"parameters":[{"name":"Text","value":"Callback Test Line","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":695,"y":29},"useDynamic":false}},{"id":"26de0902-e10b-457b-a255-1b37c99686e3","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e6a47bbe-09b0-4e26-8a5e-a175f3ddbc44"},{"condition":"Error","transition":"e6a47bbe-09b0-4e26-8a5e-a175f3ddbc44"}],"parameters":[{"name":"Text","value":"Callback currently active, stay connected to cancel","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":581,"y":315},"useDynamic":false}},{"id":"e6a47bbe-09b0-4e26-8a5e-a175f3ddbc44","type":"PlayPrompt","branches":[{"condition":"Success","transition":"0ec55268-f833-4851-a826-f9135fc5aa68"},{"condition":"Error","transition":"0ec55268-f833-4851-a826-f9135fc5aa68"}],"parameters":[{"name":"Text","value":"now cancelling","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":832,"y":314},"useDynamic":false}},{"id":"27d50b40-0178-4c9c-bcfa-9aa69f17b27b","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1581,"y":376}}},{"id":"40330ba8-712c-4079-bd7f-68476c3f7ffd","type":"PlayPrompt","branches":[{"condition":"Success","transition":"27d50b40-0178-4c9c-bcfa-9aa69f17b27b"},{"condition":"Error","transition":"27d50b40-0178-4c9c-bcfa-9aa69f17b27b"}],"parameters":[{"name":"Text","value":"Lambda Success, returned: $.External.Callback_Status","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1342,"y":278},"useDynamic":false}},{"id":"0ec55268-f833-4851-a826-f9135fc5aa68","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"40330ba8-712c-4079-bd7f-68476c3f7ffd"},{"condition":"Error","transition":"d2d35ffc-42e7-4a1d-8de1-308a96983b6d"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-west-2:484669704065:function:AmazonConnect_ManageCallback","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"action","value":"cancel","namespace":null}],"metadata":{"position":{"x":1086,"y":318},"dynamicMetadata":{"action":false},"useDynamic":false},"target":"Lambda"},{"id":"d2d35ffc-42e7-4a1d-8de1-308a96983b6d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"27d50b40-0178-4c9c-bcfa-9aa69f17b27b"},{"condition":"Error","transition":"27d50b40-0178-4c9c-bcfa-9aa69f17b27b"}],"parameters":[{"name":"Text","value":"Lambda to cancel callback error","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1349.2578125,"y":489.265625},"useDynamic":false}},{"id":"7b1ddec8-f0ad-478f-a0fe-559f747ed3d2","type":"SetQueue","branches":[{"condition":"Success","transition":"4fb0f26a-7e7f-4587-9a8d-82fc4d9f1c16"},{"condition":"Error","transition":"4fb0f26a-7e7f-4587-9a8d-82fc4d9f1c16"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:eu-west-2:484669704065:instance/ab25fbd4-b901-4032-ab3f-45619d2e2b87/queue/7b76ecdb-3c48-4c80-8c2c-9b8ee130a10c","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":941,"y":41},"useDynamic":false,"queue":{"id":"arn:aws:connect:eu-west-2:484669704065:instance/ab25fbd4-b901-4032-ab3f-45619d2e2b87/queue/7b76ecdb-3c48-4c80-8c2c-9b8ee130a10c","text":"BasicQueue"}}},{"id":"c6729a94-5b46-4736-8a72-b30841e1df7c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"b30144b1-4c11-4442-88f4-d52d8f3d84a4"},{"condition":"Error","transition":"b30144b1-4c11-4442-88f4-d52d8f3d84a4"}],"parameters":[{"name":"Text","value":"Create callback lambda fail, callback not created","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":344,"y":1003},"useDynamic":false}},{"id":"b30144b1-4c11-4442-88f4-d52d8f3d84a4","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1216.2578125,"y":923.265625}}},{"id":"44516003-87b5-4586-80a4-0be7e84e6561","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"active","transition":"26de0902-e10b-457b-a255-1b37c99686e3"},{"condition":"NoMatch","transition":"28069e2a-a032-4cd1-aea4-e7df1f7bdaef"}],"parameters":[{"name":"Attribute","value":"Callback_Status"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":334,"y":321},"conditionMetadata":[{"operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"active","id":"8093fb08-5f2b-42e7-8d77-ff8316741986"}]}},{"id":"28069e2a-a032-4cd1-aea4-e7df1f7bdaef","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dae0d172-99a9-480f-8330-428976173d4c"},{"condition":"Error","transition":"dae0d172-99a9-480f-8330-428976173d4c"}],"parameters":[{"name":"Text","value":"No active callbacks, creating one now","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":84,"y":742},"useDynamic":false}},{"id":"4fb0f26a-7e7f-4587-9a8d-82fc4d9f1c16","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"44516003-87b5-4586-80a4-0be7e84e6561"},{"condition":"Error","transition":"f2acab44-cc47-45c8-8daf-01ef07a6ae34"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-west-2:484669704065:function:AmazonConnect_ManageCallback","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"action","value":"check","namespace":null}],"metadata":{"position":{"x":64,"y":320},"dynamicMetadata":{"action":false},"useDynamic":false},"target":"Lambda"},{"id":"f2acab44-cc47-45c8-8daf-01ef07a6ae34","type":"PlayPrompt","branches":[{"condition":"Success","transition":"28069e2a-a032-4cd1-aea4-e7df1f7bdaef"},{"condition":"Error","transition":"28069e2a-a032-4cd1-aea4-e7df1f7bdaef"}],"parameters":[{"name":"Text","value":"Checking callback status lambda error","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":315.2578125,"y":529.265625},"useDynamic":false}},{"id":"3b746d7d-c360-4b28-9853-43cbb4796e6c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"b30144b1-4c11-4442-88f4-d52d8f3d84a4"},{"condition":"Error","transition":"b30144b1-4c11-4442-88f4-d52d8f3d84a4"}],"parameters":[{"name":"Text","value":"Callback created!","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":908,"y":708},"useDynamic":false}},{"id":"fb3d136b-f853-4341-8112-2a4aa1934d24","type":"PlayPrompt","branches":[{"condition":"Success","transition":"b30144b1-4c11-4442-88f4-d52d8f3d84a4"},{"condition":"Error","transition":"b30144b1-4c11-4442-88f4-d52d8f3d84a4"}],"parameters":[{"name":"Text","value":"Creating Contact Flow callback fail","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":912,"y":910},"useDynamic":false}},{"id":"dae0d172-99a9-480f-8330-428976173d4c","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"5b1685af-304e-4ff9-b26a-ad5a19c95a59"},{"condition":"Error","transition":"c6729a94-5b46-4736-8a72-b30841e1df7c"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-west-2:484669704065:function:AmazonConnect_ManageCallback","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"action","value":"create","namespace":null}],"metadata":{"position":{"x":351,"y":747},"dynamicMetadata":{"action":false},"useDynamic":false},"target":"Lambda"},{"id":"5b1685af-304e-4ff9-b26a-ad5a19c95a59","type":"CreateCallback","branches":[{"condition":"Success","transition":"3b746d7d-c360-4b28-9853-43cbb4796e6c"},{"condition":"Error","transition":"fb3d136b-f853-4341-8112-2a4aa1934d24"}],"parameters":[{"name":"InitialDelaySeconds","value":20},{"name":"RetryDelaySeconds","value":20},{"name":"MaxRetryAttempts","value":1}],"metadata":{"position":{"x":613,"y":751},"useDynamic":false,"queue":null}}],"version":"1","start":"937383ce-a1d5-4c12-8d80-6f3fa11fb5cb","metadata":{"entryPointPosition":{"x":11,"y":15},"snapToGrid":false,"name":"aTestFlow","description":"Sample flow to enable recording behavior","type":"contactFlow","status":"published","hash":"334d63ed58b3b66d09929de2fbb9a8487b6c7637dcafa17fe668c82240166a39"},"type":"contactFlow"}